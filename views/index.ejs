<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LumenNyx Studios â€“ Booking & Paperwork Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/css/style.css" />
</head>

<body class="auth-page">
  <header class="site-header">
    <div class="site-header-inner">
      <a href="/" class="brand-link">
        <span class="brand-mark">
          <img src="/img/lumennyx-mark.png" alt="LumenNyx logo">
        </span>
        <span class="brand-text">LUMENNYX STUDIOS</span>
      </a>

      <nav class="main-nav">
        <a href="/" class="active">Home</a>
        <a href="/privacy">Privacy</a>
        <a href="/terms">Terms</a>
        <a href="/2257">2257</a>
      </nav>
    </div>
  </header>

  <main class="page-wrapper">
    <section class="auth-card">
      <h2>Private Booking & Paperwork Portal</h2>

      <p class="auth-subtext">
        This is a private portal for models, talent, and studio staff to manage
        bookings, releases, IDs, and production documents for <strong>LumenNyx Studios</strong>.
      </p>

      <div class="release-box" style="margin-bottom: 1.1rem;">
        <div class="release-text">
          <h3 style="margin-top: 0;">What you can do here</h3>
          <ul>
            <li>Submit / review booking requests</li>
            <li>Complete onboarding paperwork (identity + consent + releases)</li>
            <li>Upload required documents and reference photos (where enabled)</li>
            <li>Capture signatures and maintain a verifiable audit trail</li>
          </ul>

          <p class="field-help" style="margin-top: 0.8rem;">
            This portal is for administrative workflow only. It is not a public content site.
          </p>
        </div>
      </div>

      <% 
        // Safe current-user resolution to avoid template crashes if locals naming changes.
        const cu =
          (typeof currentUser !== 'undefined' && currentUser) ? currentUser :
          (typeof user !== 'undefined' && user) ? user :
          (typeof sessionUser !== 'undefined' && sessionUser) ? sessionUser :
          (typeof locals !== 'undefined' && locals && locals.currentUser) ? locals.currentUser :
          null;
      %>

      <% if (typeof error !== 'undefined' && error) { %>
        <div class="alert error"><%= error %></div>
      <% } %>

      <% if (typeof message !== 'undefined' && message) { %>
        <div class="alert success"><%= message %></div>
      <% } %>

      <% if (cu) { %>
        <div class="release-box" style="margin-bottom: 1rem;">
          <div class="release-text">
            <p style="margin: 0;">
              You are signed in as <strong><%= cu.username %></strong>
              (<%= cu.role %>).
            </p>
          </div>
        </div>

        <% if (cu.role === 'admin' || cu.role === 'staff') { %>
          <a class="btn primary" style="width: 100%; margin-bottom: 0.6rem;" href="/studio-panel">
            Go to Studio Panel
          </a>
          <a class="btn secondary" style="width: 100%;" href="/logout">
            Logout
          </a>
        <% } else if (cu.role === 'model') { %>
          <a class="btn primary" style="width: 100%; margin-bottom: 0.6rem;" href="/model/profile">
            Go to Model Dashboard
          </a>
          <a class="btn secondary" style="width: 100%;" href="/logout">
            Logout
          </a>
        <% } else { %>
          <a class="btn primary" style="width: 100%; margin-bottom: 0.6rem;" href="/logout">
            Logout
          </a>
        <% } %>

      <% } else { %>
        <a class="btn primary" style="width: 100%; margin-bottom: 0.6rem;" href="/login">
          Model Login
        </a>

        <a class="btn secondary" style="width: 100%; margin-bottom: 0.6rem;" href="/register">
          Model Registration
        </a>

        <a class="btn secondary" style="width: 100%;" href="/staff-login">
          Staff Login
        </a>

        <p class="auth-note" style="margin-top: 1rem;">
          If you are a model and need onboarding help, contact <strong>models@lumennyxstudios.com</strong>.
        </p>
      <% } %>
    </section>
  </main>
</body>
</html>
