<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Executed Documents</title>
  <style>
    body{font-family:Arial, sans-serif; margin:24px; color:#111}
    .card{max-width:1100px; margin:0 auto; padding:22px; border:1px solid #ddd; border-radius:12px}
    table{width:100%; border-collapse:collapse; margin-top:14px}
    th, td{border-bottom:1px solid #eee; padding:10px; text-align:left; font-size:14px}
    th{background:#fafafa}
    a{color:#0b57d0; text-decoration:none; font-weight:600}
    a:hover{text-decoration:underline}
    .muted{color:#555; font-size:14px}
    .tag{display:inline-block; padding:3px 8px; border:1px solid #ddd; border-radius:999px; font-size:12px}
  </style>
</head>
<body>
  <div class="card">
    <h1>Executed Documents</h1>
    <div class="muted">Latest executed PDFs generated by the portal.</div>

    <table>
      <thead>
        <tr>
          <th>Signed At</th>
          <th>User</th>
          <th>Doc Type</th>
          <th>PDF</th>
          <th>Hash</th>
        </tr>
      </thead>
      <tbody>
        <% if (!rows || rows.length === 0) { %>
          <tr><td colspan="5" class="muted">No executed documents yet.</td></tr>
        <% } %>

        <% (rows || []).forEach(r => { %>
          <tr>
            <td><%= r.signed_at %></td>
            <td><%= r.username || ('User #' + r.user_id) %></td>
            <td><span class="tag"><%= r.doc_type %></span></td>
            <td>
              <% if (r.executed_pdf_filename) { %>
                <a href="/studio-panel/executed/<%= r.id %>/pdf" target="_blank">Open PDF</a>
              <% } else { %>
                —
              <% } %>
            </td>
            <td style="font-family:monospace; font-size:12px"><%= r.document_hash || '—' %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</body>
</html>
