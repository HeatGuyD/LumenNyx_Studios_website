<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Booking – LumenNyx Studios</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="home">
  <header class="site-header">
    <div class="site-header-inner">
      <a href="/" class="brand-link">
        <span class="brand-mark"><img src="/img/lumennyx-mark.png" alt="LumenNyx logo"></span>
        <span class="brand-text">LUMENNYX STUDIOS</span>
      </a>
      <nav class="main-nav">
        <a href="/model/profile">Model Portal</a>
        <a href="/model/bookings" class="active">My Bookings</a>
        <a href="/model/signature">Signature</a>
        <a href="/model/release">Release</a>
        <form action="/logout" method="POST" style="display:inline;">
          <button class="btn secondary" style="padding:0.25rem 0.9rem;font-size:0.8rem;">Logout</button>
        </form>
      </nav>
    </div>
  </header>

  <main class="page-wrapper">
    <section class="portal-section">
      <h2><%= booking.title %></h2>
      <p class="portal-note">
        Status: <strong><%= booking.status %></strong>
        <% if (booking.shoot_date) { %> • Date: <strong><%= booking.shoot_date %></strong><% } %>
        <% if (booking.location) { %> • Location: <strong><%= booking.location %></strong><% } %>
      </p>

      <h3>Booking Profile (Auto-filled)</h3>
      <p class="portal-note">This information is pulled from your application/profile. Update your profile if anything changes.</p>

      <div class="documents-list">
        <table>
          <tbody>
            <tr><th>Legal Name</th><td><%= bookingProfile?.legal_name || '—' %></td></tr>
            <tr><th>Preferred Name</th><td><%= bookingProfile?.preferred_name || '—' %></td></tr>
            <tr><th>Aliases</th><td><%= bookingProfile?.aliases || '—' %></td></tr>
            <tr><th>DOB</th><td><%= bookingProfile?.date_of_birth || '—' %></td></tr>
            <tr><th>Email</th><td><%= bookingProfile?.email || '—' %></td></tr>
            <tr><th>Phone</th><td><%= bookingProfile?.phone || '—' %></td></tr>
          </tbody>
        </table>
      </div>

      <h3 style="margin-top:1.2rem;">Compliance Checklist (Required before confirmation)</h3>

      <% const c = compliance?.checklist || {}; %>
      <div class="status-summary">
        <div class="status-pill <%= c.signature ? 'ok' : 'missing' %>"><span class="label">Signature</span><span><%= c.signature ? 'On file' : 'Missing' %></span></div>
        <div class="status-pill <%= c.masterRelease ? 'ok' : 'missing' %>"><span class="label">Master Release</span><span><%= c.masterRelease ? 'Signed' : 'Missing' %></span></div>
        <div class="status-pill <%= c.consent ? 'ok' : 'missing' %>"><span class="label">Consent</span><span><%= c.consent ? 'Saved' : 'Missing' %></span></div>
        <div class="status-pill <%= (c.id_primary_front && c.id_primary_back && c.selfie_with_id) ? 'ok' : 'missing' %>"><span class="label">IDs</span><span><%= (c.id_primary_front && c.id_primary_back && c.selfie_with_id) ? 'Complete' : 'Missing' %></span></div>
        <div class="status-pill <%= c.w9 ? 'ok' : 'missing' %>"><span class="label">W-9</span><span><%= c.w9 ? 'Uploaded' : 'Missing' %></span></div>
      </div>

      <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:1rem;">
        <a class="btn secondary" href="/model/profile#docs">Upload IDs / Docs</a>
        <a class="btn secondary" href="/model/signature">Signature</a>
        <a class="btn secondary" href="/model/release">Master Release</a>
        <a class="btn secondary" href="/model/profile#safety">Consent</a>
      </div>

      <p class="field-help" style="margin-top:0.8rem;">
        The studio cannot confirm a booking until required compliance items are complete.
      </p>
    </section>
  </main>
</body>
</html>
